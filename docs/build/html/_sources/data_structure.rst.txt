.. _data_structure:

**Data structure**
==================

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

***************************
Specifications
***************************

* Position yourself in the root folder of the project ``cd oc_lettings_site``
* Open a shell session ``sqlite3``
* Connection to the database ``.open oc-lettings-site.sqlite3``
* Displays the database tables ``.tables``
* Displays the profiles, pragma ``table_info(oc_lettings_site_profile)``
* Create a query on the profile table:
* ``select user_id, favorite_city from oc_lettings_site_profile where favorite_city like 'B%';``
* ``.quit`` to leave

To have a graphical interface, it is better to use the free software `DB Browser for SQLite <https://sqlitebrowser.org/dl/>`_.

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*******
Address
*******

* verbose_name = "Address"
* verbose_name_plural = "Addresses"

+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+
| number                               | street         | city          | state                              | zip_code                              | country_iso_code                   |
+======================================+================+===============+====================================+=======================================+====================================+
| PositiveIntegerField                 | CharField      | CharField     | CharField                          | PositiveIntegerField                  | CharField                          |
+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+
| validators=[MaxValueValidator(9999)] | max_length=64  | max_length=64 | max_length=2                       | validators=[MaxValueValidator(99999)] | max_length=3                       |
+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+
|                                      |                |               | validators=[MinLengthValidator(2)] |                                       | validators=[MinLengthValidator(3)] |
+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

********
Lettings
********

+----------------+--------------------------+
| title          | address                  |
+================+==========================+
| CharField      | OneToOneField            |
+----------------+--------------------------+
| max_length=256 | Address                  |
+----------------+--------------------------+
|                | on_delete=models.CASCADE |
+----------------+--------------------------+

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*******
Profile
*******

+--------------------------+---------------+
| user                     | favorite_city |
+==========================+===============+
| User                     | CharField     |
+--------------------------+---------------+
| on_delete=models.CASCADE | max_length=64 |
+--------------------------+---------------+
|                          | blank=True    |
+--------------------------+---------------+

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

******
Schema
******

.. _ma_figure:

.. figure:: _static/database_structure.png
   :height: 400
   :width: 700
   :scale: 80
   :align: center
   :alt: Database structure

   :download:`Download <_static/database_structure.png>`