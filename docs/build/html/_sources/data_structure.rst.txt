.. _data_structure:

**Data structure**
==================

.. important::

    .. image:: https://img.shields.io/badge/sqlite-%2307405e.svg?style=for-the-badge&logo=sqlite&logoColor=white
        :alt: Sqlite Badge
        :target: https://www.sqlite.org/index.html

    Parameterizations are done to a specific project. To parameterize to the other project, go to the official 
    documentation `SQLite <https://www.sqlite.org/index.html>`_.


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

**************
Specifications
**************

‚è©Ô∏è Change directory

.. code-block:: console

   cd oc_lettings_site


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üîß Open a shell session

.. code-block:: console

   .open oc-lettings-site.sqlite3


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üîç Displays the database tables

.. code-block:: console

   .tables


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üîç Displays the profiles, pragma 

.. code-block:: console

   table_info(oc_lettings_site_profile)


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üîç Create a query on the profile table:

.. code-block:: sql

   select user_id, favorite_city from oc_lettings_site_profile where favorite_city like 'B%';``


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üîö To leave

.. code-block:: console

   .quit


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

To have a graphical interface, it is better to use the free software `DB Browser for SQLite <https://sqlitebrowser.org/dl/>`_.

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*******
Address
*******

* verbose_name = "Address"
* verbose_name_plural = "Addresses"

+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+
| number                               | street         | city          | state                              | zip_code                              | country_iso_code                   |
+======================================+================+===============+====================================+=======================================+====================================+
| PositiveIntegerField                 | CharField      | CharField     | CharField                          | PositiveIntegerField                  | CharField                          |
+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+
| validators=[MaxValueValidator(9999)] | max_length=64  | max_length=64 | max_length=2                       | validators=[MaxValueValidator(99999)] | max_length=3                       |
+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+
|                                      |                |               | validators=[MinLengthValidator(2)] |                                       | validators=[MinLengthValidator(3)] |
+--------------------------------------+----------------+---------------+------------------------------------+---------------------------------------+------------------------------------+

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

********
Lettings
********

+----------------+--------------------------+
| title          | address                  |
+================+==========================+
| CharField      | OneToOneField            |
+----------------+--------------------------+
| max_length=256 | Address                  |
+----------------+--------------------------+
|                | on_delete=models.CASCADE |
+----------------+--------------------------+

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*******
Profile
*******

+--------------------------+---------------+
| user                     | favorite_city |
+==========================+===============+
| User                     | CharField     |
+--------------------------+---------------+
| on_delete=models.CASCADE | max_length=64 |
+--------------------------+---------------+
|                          | blank=True    |
+--------------------------+---------------+

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

******
Schema
******

.. _ma_figure:

.. figure:: _static/database_structure.png
   :height: 400
   :width: 700
   :scale: 80
   :align: center
   :alt: Database structure`

.. raw:: html

   <div style="text-align: center;">
       <a href="_static/database_structure.png" download class="button">
          <img src="_static/button_download.png" alt="Donwload button" width="100" height="50" />
       </a>
   </div>

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------